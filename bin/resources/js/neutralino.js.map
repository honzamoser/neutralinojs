{"version":3,"file":"neutralino.js","sources":["src/api/extensions.ts","src/browser/events.ts","src/helpers.ts","src/ws/websocket.ts","src/api/filesystem.ts","src/api/os.ts","src/api/computer.ts","src/api/storage.ts","src/api/debug.ts","src/api/app.ts","src/api/window.ts","src/api/events.ts","src/api/updater.ts","src/api/clipboard.ts","src/api/resources.ts","src/api/custom.ts","src/api/init.ts"],"sourcesContent":["import * as websocket from '../ws/websocket';\nimport type { ExtensionStats } from '../types/api/extensions';\n\nexport function dispatch(extensionId: string, event: string, data?: any): Promise<void> {\n    return new Promise(async (resolve: any, reject: any) => {\n        const stats = await getStats();\n        if(!stats.loaded.includes(extensionId)) {\n            reject({\n                code: 'NE_EX_EXTNOTL',\n                message: `${extensionId} is not loaded`\n            });\n        }\n        else if(stats.connected.includes(extensionId)) {\n            try {\n                const result = await websocket.sendMessage('extensions.dispatch', {extensionId, event, data});\n                resolve(result);\n            }\n            catch(err: any) {\n                reject(err);\n            }\n        }\n        else {\n            // loaded but not connected yet.\n            websocket.sendWhenExtReady(extensionId, {\n                method: 'extensions.dispatch',\n                data: {extensionId, event, data}, resolve, reject\n            });\n        }\n    });\n};\n\nexport function broadcast(event: string, data?: any): Promise<void> {\n    return websocket.sendMessage('extensions.broadcast', {event, data});\n};\n\nexport function getStats(): Promise<ExtensionStats> {\n    return websocket.sendMessage('extensions.getStats');\n};\n","import type { Response } from '../types/events';\n\nexport function on(event: string, handler: (ev: CustomEvent) => void): Promise<Response> {\n    window.addEventListener(event, handler);\n    return Promise.resolve({\n        success: true,\n        message: 'Event listener added'\n    });\n};\n\nexport function off(event: string, handler: (ev: CustomEvent) => void): Promise<Response> {\n    window.removeEventListener(event, handler);\n    return Promise.resolve({\n        success: true,\n        message: 'Event listener removed'\n    });\n};\n\nexport function dispatch(event: string, data?: any): Promise<Response> {\n    const customEvent = new CustomEvent(event, {detail: data});\n    window.dispatchEvent(customEvent);\n    return Promise.resolve({\n        success: true,\n        message: 'Message dispatched'\n    });\n};\n","export function base64ToBytesArray(data: string): ArrayBuffer {\n    const binaryData: string = window.atob(data);\n    const len: number = binaryData.length;\n    const bytes: Uint8Array = new Uint8Array(len);\n\n    for (let i = 0; i < len; i++) {\n        bytes[i] = binaryData.charCodeAt(i);\n    }\n\n    return bytes.buffer;\n}\n\nexport function arrayBufferToBase64(data: ArrayBuffer): string {\n    let bytes: Uint8Array = new Uint8Array(data);\n    let asciiStr: string = '';\n\n    for(let byte of bytes) {\n        asciiStr += String.fromCharCode(byte);\n    }\n\n    return window.btoa(asciiStr);\n};\n","import * as extensions from '../api/extensions';\nimport * as events from '../browser/events';\nimport { base64ToBytesArray } from '../helpers';\n\nlet ws;\nconst nativeCalls = {};\nconst offlineMessageQueue = [];\nconst extensionMessageQueue = {}\n\nexport function init() {\n    initAuth();\n    const connectToken: string = getAuthToken().split('.')[1];\n    const hostname: string = (window.NL_GINJECTED || window.NL_CINJECTED) ? \n                            'localhost' : window.location.hostname;\n    ws = new WebSocket(`ws://${hostname}:${window.NL_PORT}?connectToken=${connectToken}`);\n    registerLibraryEvents();\n    registerSocketEvents();\n}\n\nexport function sendMessage(method: string, data?: any): Promise<any> {\n    return new Promise((resolve: any, reject: any) => {\n\n        if(ws?.readyState != WebSocket.OPEN) {\n            sendWhenReady({method, data, resolve, reject});\n            return;\n        }\n\n        const id: string = uuidv4();\n        const accessToken: string = getAuthToken();\n\n        nativeCalls[id] = {resolve, reject};\n\n        ws.send(JSON.stringify({\n            id,\n            method,\n            data,\n            accessToken\n        }));\n\n    });\n}\n\nexport function sendWhenReady(message: any) {\n    offlineMessageQueue.push(message);\n}\n\nexport function sendWhenExtReady(extensionId: string, message: any) {\n    if(extensionId in extensionMessageQueue) {\n        extensionMessageQueue[extensionId].push(message);\n    }\n    else {\n        extensionMessageQueue[extensionId] = [message];\n    }\n}\n\nfunction registerLibraryEvents() {\n    events.on('ready', async () => {\n        await processQueue(offlineMessageQueue);\n\n        if(!window.NL_EXTENABLED) {\n            return;\n        }\n\n        const stats = await extensions.getStats();\n        for(const extension of stats.connected) {\n            events.dispatch('extensionReady', extension);\n        }\n    });\n\n    events.on('extClientConnect', (evt) => {\n        events.dispatch('extensionReady', evt.detail);\n    });\n\n    if(!window.NL_EXTENABLED) {\n        return;\n    }\n\n    events.on('extensionReady', async (evt) => {\n        if(evt.detail in extensionMessageQueue) {\n            await processQueue(extensionMessageQueue[evt.detail]);\n            delete extensionMessageQueue[evt.detail];\n        }\n    });\n}\n\nfunction registerSocketEvents() {\n    ws.addEventListener('message', (event) => {\n        const message = JSON.parse(event.data);\n\n        if(message.id && message.id in nativeCalls) {\n            // Native call response\n            if(message.data?.error) {\n                nativeCalls[message.id].reject(message.data.error);\n                if(message.data.error.code == 'NE_RT_INVTOKN') {\n                    // Invalid native method token\n                    handleNativeMethodTokenError();\n                }\n            }\n            else if(message.data?.success) {\n                nativeCalls[message.id]\n                    .resolve(message.data.hasOwnProperty('returnValue') ? message.data.returnValue\n                        : message.data);\n            }\n            delete nativeCalls[message.id];\n        }\n        else if(message.event) {\n            // Event from process\n            if(message.event == 'openedFile' && message?.data?.action == 'dataBinary') {\n                message.data.data = base64ToBytesArray(message.data.data);\n            }\n            events.dispatch(message.event, message.data);\n        }\n    });\n\n    ws.addEventListener('open', async (event) => {\n        events.dispatch('ready');\n    });\n\n    ws.addEventListener('close', async (event) => {\n        const error = {\n            code: 'NE_CL_NSEROFF',\n            message: 'Neutralino server is offline. Try restarting the application'\n        };\n        events.dispatch('serverOffline', error);\n    });\n\n    ws.addEventListener('error', async (event) => {\n        handleConnectError();\n    });\n}\n\nasync function processQueue(messageQueue: any[]) {\n    while(messageQueue.length > 0) {\n        const message = messageQueue.shift();\n        try {\n            const response = await sendMessage(message.method, message.data);\n            message.resolve(response);\n        }\n        catch(err: any) {\n            message.reject(err);\n        }\n    }\n}\n\nfunction handleNativeMethodTokenError() {\n    ws.close();\n    document.body.innerText = '';\n    document.write('<code>NE_RT_INVTOKN</code>: Neutralinojs application cannot' +\n                                    ' execute native methods since <code>NL_TOKEN</code> is invalid.');\n}\n\nfunction handleConnectError() {\n    document.body.innerText = '';\n    document.write('<code>NE_CL_IVCTOKN</code>: Neutralinojs application cannot' +\n                                    ' connect with the framework core using <code>NL_TOKEN</code>.');\n}\n\nfunction initAuth() {\n    if (window.NL_TOKEN) {\n        sessionStorage.setItem('NL_TOKEN', window.NL_TOKEN);\n    }\n}\nfunction getAuthToken() {\n    return window.NL_TOKEN || sessionStorage.getItem('NL_TOKEN') || '';\n}\n\n// From: https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid\nfunction uuidv4(): string {\n  return \"10000000-1000-4000-8000-100000000000\".replace(/[018]/g, (c: any) =>\n    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n  );\n}\n","import { sendMessage } from '../ws/websocket';\nimport { base64ToBytesArray, arrayBufferToBase64 } from '../helpers';\nimport type {\n    DirectoryEntry,\n    DirectoryReaderOptions,\n    FileReaderOptions,\n    CopyOptions,\n    OpenedFile,\n    Stats,\n    Watcher,\n    PathParts,\n} from '../types/api/filesystem';\n\nexport function createDirectory(path: string): Promise<void> {\n    return sendMessage('filesystem.createDirectory', { path });\n};\n\nexport function remove(path: string): Promise<void> {\n    return sendMessage('filesystem.remove', { path });\n};\n\nexport function writeFile(path: string, data: string): Promise<void> {\n    return sendMessage('filesystem.writeFile', { path, data });\n};\n\nexport function appendFile(path: string, data: string): Promise<void> {\n    return sendMessage('filesystem.appendFile', { path, data });\n};\n\nexport function writeBinaryFile(path: string, data: ArrayBuffer): Promise<void> {\n    return sendMessage('filesystem.writeBinaryFile', {\n        path,\n        data: arrayBufferToBase64(data)\n    });\n};\n\nexport function appendBinaryFile(path: string, data: ArrayBuffer): Promise<void> {\n    return sendMessage('filesystem.appendBinaryFile', {\n        path,\n        data: arrayBufferToBase64(data)\n    });\n};\n\nexport function readFile(path: string, options?: FileReaderOptions): Promise<string> {\n    return sendMessage('filesystem.readFile', { path, ...options });\n};\n\nexport function readBinaryFile(path: string, options?: FileReaderOptions): Promise<ArrayBuffer> {\n    return new Promise((resolve: any, reject: any) => {\n        sendMessage('filesystem.readBinaryFile', { path, ...options })\n        .then((base64Data: string) => {\n            resolve(base64ToBytesArray(base64Data));\n        })\n        .catch((error: any) => {\n            reject(error);\n        });\n    });\n};\n\nexport function openFile(path: string): Promise<number> {\n    return sendMessage('filesystem.openFile', { path });\n};\n\nexport function createWatcher(path: string): Promise<number> {\n    return sendMessage('filesystem.createWatcher', { path });\n};\n\nexport function removeWatcher(id: number): Promise<number> {\n    return sendMessage('filesystem.removeWatcher', { id });\n};\n\nexport function getWatchers(): Promise<Watcher[]> {\n    return sendMessage('filesystem.getWatchers');\n};\n\nexport function updateOpenedFile(id: number, event: string, data?: any): Promise<void> {\n    return sendMessage('filesystem.updateOpenedFile', { id, event, data });\n};\n\nexport function getOpenedFileInfo(id: number): Promise<OpenedFile> {\n    return sendMessage('filesystem.getOpenedFileInfo', { id });\n};\n\nexport function readDirectory(path: string, options?: DirectoryReaderOptions): Promise<DirectoryEntry[]> {\n    return sendMessage('filesystem.readDirectory', { path, ...options });\n};\n\nexport function copy(source: string, destination: string, options?: CopyOptions ): Promise<void> {\n    return sendMessage('filesystem.copy', { source, destination, ...options } );\n};\n\nexport function move(source: string, destination: string): Promise<void> {\n    return sendMessage('filesystem.move', { source, destination });\n};\n\nexport function getStats(path: string): Promise<Stats> {\n    return sendMessage('filesystem.getStats', { path });\n};\n\nexport function getAbsolutePath(path: string): Promise<string> {\n    return sendMessage('filesystem.getAbsolutePath', { path });\n};\n\nexport function getRelativePath(path: string, base?: string): Promise<string> {\n    return sendMessage('filesystem.getRelativePath', { path, base });\n};\n\nexport function getPathParts(path: string): Promise<PathParts> {\n    return sendMessage('filesystem.getPathParts', { path });\n};\n","import { sendMessage } from '../ws/websocket';\nimport type { MessageBoxChoice, Icon } from '../types/enums';\nimport type {\n    Envs,\n    ExecCommandOptions,\n    ExecCommandResult,\n    FolderDialogOptions,\n    KnownPath,\n    OpenDialogOptions,\n    SaveDialogOptions,\n    SpawnedProcess,\n    TrayOptions\n} from '../types/api/os';\n\nexport function execCommand(command: string, options?: ExecCommandOptions): Promise<ExecCommandResult> {\n    return sendMessage('os.execCommand', { command, ...options });\n};\n\nexport function spawnProcess(command: string, cwd?: string): Promise<SpawnedProcess> {\n    return sendMessage('os.spawnProcess', { command, cwd });\n};\n\nexport function updateSpawnedProcess(id: number, event: string, data?: any): Promise<void> {\n    return sendMessage('os.updateSpawnedProcess', { id, event, data });\n};\n\nexport function getSpawnedProcesses(): Promise<SpawnedProcess[]> {\n    return sendMessage('os.getSpawnedProcesses');\n};\n\nexport function getEnv(key: string): Promise<string> {\n    return sendMessage('os.getEnv', { key });\n};\n\nexport function getEnvs(): Promise<Envs> {\n    return sendMessage('os.getEnvs');\n};\n\nexport function showOpenDialog(title?: string, options?: OpenDialogOptions): Promise<string[]> {\n    return sendMessage('os.showOpenDialog', { title, ...options });\n};\n\nexport function showFolderDialog(title?: string, options?: FolderDialogOptions): Promise<string> {\n    return sendMessage('os.showFolderDialog', { title, ...options });\n};\n\nexport function showSaveDialog(title?: string, options?: SaveDialogOptions): Promise<string> {\n    return sendMessage('os.showSaveDialog', { title, ...options });\n};\n\nexport function showNotification(title: string, content: string, icon?: Icon): Promise<void> {\n    return sendMessage('os.showNotification', { title, content, icon });\n};\n\nexport function showMessageBox(title: string, content: string,\n                choice?: MessageBoxChoice, icon?: Icon): Promise<string> {\n    return sendMessage('os.showMessageBox', { title, content, choice, icon });\n};\n\nexport function setTray(options: TrayOptions): Promise<void> {\n    return sendMessage('os.setTray', options);\n};\n\nexport function open(url: string): Promise<void> {\n    return sendMessage('os.open', { url });\n};\n\nexport function getPath(name: KnownPath): Promise<string> {\n    return sendMessage('os.getPath', { name });\n};\n","import { sendMessage } from '../ws/websocket';\nimport type {\n    MemoryInfo,\n    KernelInfo,\n    OSInfo,\n    CPUInfo,\n    Display,\n    MousePosition\n} from '../types/api/computer';\n\nexport function getMemoryInfo(): Promise<MemoryInfo> {\n    return sendMessage('computer.getMemoryInfo');\n};\n\nexport function getArch(): Promise<string> {\n    return sendMessage('computer.getArch');\n};\n\nexport function getKernelInfo(): Promise<KernelInfo> {\n    return sendMessage('computer.getKernelInfo');\n};\n\nexport function getOSInfo(): Promise<OSInfo> {\n    return sendMessage('computer.getOSInfo');\n};\n\nexport function getCPUInfo(): Promise<CPUInfo> {\n    return sendMessage('computer.getCPUInfo');\n};\n\nexport function getDisplays(): Promise<Display[]> {\n    return sendMessage('computer.getDisplays');\n};\n\nexport function getMousePosition(): Promise<MousePosition> {\n    return sendMessage('computer.getMousePosition');\n};\n","import { sendMessage } from '../ws/websocket';\n\nexport function setData(key: string, data: string): Promise<void> {\n    return sendMessage('storage.setData', { key, data });\n};\n\nexport function getData(key: string): Promise<string> {\n    return sendMessage('storage.getData', { key });\n};\n\nexport function getKeys(): Promise<string[]> {\n    return sendMessage('storage.getKeys');\n};\n","import { sendMessage } from '../ws/websocket';\nimport type { LoggerType } from '../types/enums';\n\nexport function log(message: string, type?: LoggerType): Promise<void> {\n    return sendMessage('debug.log', { message, type });\n};\n","import { sendMessage } from '../ws/websocket';\nimport * as os from './os';\nimport type { RestartOptions } from \"../types/api/app\"\n\nexport function exit(code?: number): Promise<void> {\n    return sendMessage('app.exit', { code });\n};\n\nexport function killProcess(): Promise<void> {\n    return sendMessage('app.killProcess');\n};\n\nexport function restartProcess(options?: RestartOptions): Promise<void> {\n    return new Promise(async (resolve: () => void) => {\n        let command = window.NL_ARGS.reduce((acc: string, arg: string) => {\n            if(arg.includes(' ')) {\n                arg = `\"${arg}\"`\n            }\n            acc += ' ' + arg;\n            return acc;\n        }, '');\n\n        if(options?.args) {\n            command += ' ' + options.args;\n        }\n\n        await os.execCommand(command, {background: true});\n        exit();\n        resolve();\n    });\n};\n\nexport function getConfig(): Promise<any> {\n    return sendMessage('app.getConfig');\n};\n\nexport function broadcast(event: string, data?: any): Promise<void> {\n    return sendMessage('app.broadcast', {event, data});\n};\n\nexport function readProcessInput(readAll?: boolean): Promise<string> {\n    return sendMessage('app.readProcessInput', { readAll });\n};\n\nexport function writeProcessOutput(data: string): Promise<void> {\n    return sendMessage('app.writeProcessOutput', { data });\n};\n\nexport function writeProcessError(data: string): Promise<void> {\n    return sendMessage('app.writeProcessError', { data });\n};\n","import { sendMessage } from '../ws/websocket';\nimport * as os from './os';\nimport {\n    WindowOptions,\n    WindowPosOptions,\n    WindowSizeOptions\n} from '../types/api/window';\n\nconst draggableRegions: WeakMap<HTMLElement, {\n    pointerdown: (e: PointerEvent) => void;\n    pointerup: (e: PointerEvent) => void;\n}> = new WeakMap();\n\nexport function setTitle(title: string): Promise<void> {\n    return sendMessage('window.setTitle', { title });\n};\n\nexport function getTitle(): Promise<string> {\n    return sendMessage('window.getTitle');\n};\n\nexport function maximize(): Promise<void> {\n    return sendMessage('window.maximize');\n};\n\nexport function unmaximize(): Promise<void> {\n    return sendMessage('window.unmaximize');\n};\n\nexport function isMaximized(): Promise<boolean> {\n    return sendMessage('window.isMaximized');\n};\n\nexport function minimize(): Promise<void> {\n    return sendMessage('window.minimize');\n};\n\nexport function unminimize(): Promise<void> {\n    return sendMessage('window.unminimize');\n};\n\nexport function isMinimized(): Promise<boolean> {\n    return sendMessage('window.isMinimized');\n};\n\nexport function setFullScreen(): Promise<void> {\n    return sendMessage('window.setFullScreen');\n};\n\nexport function exitFullScreen(): Promise<void> {\n    return sendMessage('window.exitFullScreen');\n};\n\nexport function isFullScreen(): Promise<boolean> {\n    return sendMessage('window.isFullScreen');\n};\n\nexport function show(): Promise<void> {\n    return sendMessage('window.show');\n};\n\nexport function hide(): Promise<void> {\n    return sendMessage('window.hide');\n};\n\nexport function isVisible(): Promise<boolean> {\n    return sendMessage('window.isVisible');\n};\n\nexport function focus(): Promise<void> {\n    return sendMessage('window.focus');\n};\n\nexport function setIcon(icon: string): Promise<void> {\n    return sendMessage('window.setIcon', { icon });\n};\n\nexport function move(x: number, y: number): Promise<void> {\n    return sendMessage('window.move', { x, y });\n};\n\nexport function center(): Promise<void> {\n    return sendMessage('window.center');\n};\n\nexport type DraggableRegionOptions = {\n    /**\n     * If set to `true`, the region will always capture the pointer,\n     * ensuring dragging doesn't break on fast pointer movement.\n     * Note that it prevents child elements from receiving any pointer events.\n     * Defaults to `false`.\n     */\n    alwaysCapture?: boolean;\n    /**\n     * Minimum distance between cursor's starting and current position\n     * after which dragging is started. This helps prevent accidental dragging\n     * while interacting with child elements.\n     * Defaults to `10`. (In pixels.)\n     */\n    dragMinDistance?: number;\n}\nexport function setDraggableRegion(domElementOrId: string | HTMLElement, options: DraggableRegionOptions = {}): Promise<{\n    success: true,\n    message: string\n}> {\n    return new Promise<Awaited<ReturnType<typeof setDraggableRegion>>>((resolve, reject) => {\n        const draggableRegion: HTMLElement = domElementOrId instanceof Element ?\n                                                    domElementOrId : document.getElementById(domElementOrId);\n        let initialClientX: number = 0;\n        let initialClientY: number = 0;\n        let absDragMovementDistance: number = 0;\n        let shouldReposition = false;\n        let lastMoveTimestamp = performance.now();\n        let isPointerCaptured = options.alwaysCapture;\n\n        if (!draggableRegion) {\n            return reject({\n                code: 'NE_WD_DOMNOTF',\n                message: 'Unable to find DOM element'\n            });\n        }\n\n        if (draggableRegions.has(draggableRegion)) {\n            return reject({\n                code: 'NE_WD_ALRDREL',\n                message: 'This DOM element is already an active draggable region'\n            });\n        }\n\n        draggableRegion.addEventListener('pointerdown', startPointerCapturing);\n        draggableRegion.addEventListener('pointerup', endPointerCapturing);\n        draggableRegion.addEventListener('pointercancel', endPointerCapturing);\n\n        draggableRegions.set(draggableRegion, { pointerdown: startPointerCapturing, pointerup: endPointerCapturing });\n\n        async function onPointerMove(evt: PointerEvent) {\n            // Get absolute drag distance from the starting point\n            const dx = evt.clientX - initialClientX,\n                  dy = evt.clientY - initialClientY;\n            absDragMovementDistance = Math.sqrt(dx * dx + dy * dy);\n            // Only start pointer capturing when the user dragged more than a certain amount of distance\n            // This ensures that the user can also click on the dragable area, e.g. if the area is menu / navbar\n            if (absDragMovementDistance >= (options.dragMinDistance ?? 10)) {\n                shouldReposition = true;\n                if (!isPointerCaptured) {\n                    draggableRegion.setPointerCapture(evt.pointerId);\n                    isPointerCaptured = true;\n                }\n            }\n\n            if (shouldReposition) {\n\n                const currentMilliseconds = performance.now();\n                const timeTillLastMove = currentMilliseconds - lastMoveTimestamp;\n                // Limit move calls to 1 per every 5ms - TODO: introduce constant instead of magic number?\n                if (timeTillLastMove < 5) {\n                    // Do not execute move more often than 1x every 5ms or performance will drop\n                    return;\n                }\n\n                // Store current time minus the offset\n                lastMoveTimestamp = currentMilliseconds - (timeTillLastMove - 5);\n\n                await move(\n                    evt.screenX - initialClientX,\n                    evt.screenY - initialClientY\n                );\n\n                return;\n            }\n        }\n\n        function startPointerCapturing(evt: PointerEvent) {\n            if (evt.button !== 0) return;\n            initialClientX = evt.clientX;\n            initialClientY = evt.clientY;\n            draggableRegion.addEventListener('pointermove', onPointerMove);\n            if (options.alwaysCapture) {\n                draggableRegion.setPointerCapture(evt.pointerId);\n            }\n        }\n\n        function endPointerCapturing(evt: PointerEvent) {\n            draggableRegion.removeEventListener('pointermove', onPointerMove);\n            draggableRegion.releasePointerCapture(evt.pointerId);\n        }\n\n        resolve({\n            success: true,\n            message: 'Draggable region was activated'\n        });\n    });\n};\n\nexport function unsetDraggableRegion(domElementOrId: string | HTMLElement): Promise<{\n    success: true,\n    message: string\n}> {\n  return new Promise<Awaited<ReturnType<typeof unsetDraggableRegion>>>((resolve, reject) => {\n        const draggableRegion: HTMLElement = domElementOrId instanceof Element ?\n                                                domElementOrId : document.getElementById(domElementOrId);\n\n        if (!draggableRegion) {\n            return reject({\n                code: 'NE_WD_DOMNOTF',\n                message: 'Unable to find DOM element'\n            });\n        }\n        if (!draggableRegions.has(draggableRegion)) {\n            return reject({\n                code: 'NE_WD_NOTDRRE',\n                message: 'DOM element is not an active draggable region'\n            });\n        }\n\n        const { pointerdown, pointerup } = draggableRegions.get(draggableRegion);\n        draggableRegion.removeEventListener('pointerdown', pointerdown);\n        draggableRegion.removeEventListener('pointerup', pointerup);\n        draggableRegion.removeEventListener('pointercancel', pointerup);\n        draggableRegions.delete(draggableRegion);\n\n        resolve({\n            success: true,\n            message: 'Draggable region was deactivated'\n        });\n  });\n}\n\nexport function setSize(options: WindowSizeOptions): Promise<void> {\n    return new Promise(async (resolve: any, reject: any) => {\n        let sizeOptions = await getSize();\n\n        options = {...sizeOptions, ...options}; // merge prioritizing options arg\n\n        sendMessage('window.setSize', options)\n            .then((response: any) => {\n                resolve(response);\n            })\n            .catch((error: any) => {\n                reject(error);\n            });\n    });\n};\n\nexport function getSize(): Promise<WindowSizeOptions> {\n    return sendMessage('window.getSize');\n};\n\nexport function getPosition(): Promise<WindowPosOptions> {\n    return sendMessage('window.getPosition');\n};\n\nexport function setAlwaysOnTop(onTop: boolean): Promise<void> {\n    return sendMessage('window.setAlwaysOnTop', { onTop });\n};\n\nexport function create(url: string, options?: WindowOptions): Promise<void> {\n    return new Promise((resolve: any, reject: any) => {\n\n        options = { ...options, useSavedState: false };\n        // useSavedState: false -> Child windows won't save their states\n\n        function normalize(arg: any) {\n            if(typeof arg != \"string\")\n                return arg;\n            arg = arg.trim();\n            if(arg.includes(\" \")) {\n                arg = `\"${arg}\"`;\n            }\n            return arg;\n        }\n\n        let command = window.NL_ARGS.reduce((acc: string, arg: string, index: number) => {\n            if(arg.includes(\"--path=\") || arg.includes(\"--debug-mode\") ||\n                arg.includes(\"--load-dir-res\") || index == 0) {\n                acc += \" \" + normalize(arg);\n            }\n            return acc;\n        }, \"\");\n\n        command += \" --url=\" + normalize(url);\n\n        for(let key in options) {\n            if(key == \"processArgs\")\n                continue;\n\n            let cliKey: string = '-' + key.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n            command += ` --window${cliKey}=${normalize(options[key])}`\n        }\n\n        if(options && options.processArgs)\n            command += \" \" + options.processArgs;\n\n        os.execCommand(command, { background: true })\n            .then((processInfo: any) => {\n                resolve(processInfo);\n            })\n            .catch((error: any) => {\n                reject(error);\n            });\n    });\n};\n","import { sendMessage } from '../ws/websocket';\n\nexport * from '../browser/events';\n\nexport function broadcast(event: string, data?: any): Promise<void> {\n    return sendMessage('events.broadcast', {event, data});\n};\n","import * as filesystem from './filesystem';\nimport { Error } from '../types/api/protocol';\nimport { Manifest } from '../types/api/updater';\n\nlet manifest: Manifest = null;\n\nexport function checkForUpdates(url: string): Promise<Manifest> {\n    function isValidManifest(manifest: Manifest): manifest is Manifest {\n        if(manifest.applicationId && manifest.applicationId == window.NL_APPID\n            && manifest.version && manifest.resourcesURL) {\n            return true;\n        }\n        return false;\n    }\n\n    return new Promise(async (resolve: (m: Manifest) => void, reject: (e: Error) => void) => {\n        if(!url) {\n            return reject({\n                code: 'NE_RT_NATRTER',\n                message: 'Missing require parameter: url'\n            });\n        }\n        try {\n            const response = await fetch(url);\n            manifest = JSON.parse(await response.text());\n\n            if(isValidManifest(manifest)) {\n                resolve(manifest);\n            }\n            else {\n                reject({\n                    code: 'NE_UP_CUPDMER',\n                    message: 'Invalid update manifest or mismatching applicationId'\n                });\n            }\n        }\n        catch(err) {\n            reject({\n                code: 'NE_UP_CUPDERR',\n                message: 'Unable to fetch update manifest'\n            });\n        }\n\n    });\n};\n\nexport function install(): Promise<void> {\n    return new Promise(async (resolve: any, reject: any) => {\n        if(!manifest) {\n            return reject({\n                code: 'NE_UP_UPDNOUF',\n                message: 'No update manifest loaded'\n            });\n        }\n        try {\n            const response = await fetch(manifest.resourcesURL);\n            const resourcesBuffer = await response.arrayBuffer();\n            await filesystem.writeBinaryFile(window.NL_PATH + \"/resources.neu\", resourcesBuffer);\n\n            resolve({\n                success: true,\n                message: 'Update installed. Restart the process to see updates'\n            });\n        }\n        catch(err) {\n            reject({\n                code: 'NE_UP_UPDINER',\n                message: 'Update installation error'\n            });\n        }\n\n    });\n};\n","import { sendMessage } from '../ws/websocket';\nimport { base64ToBytesArray, arrayBufferToBase64 } from '../helpers';\nimport type { ClipboardImage } from '../types/api/clipboard';\nimport type { ClipboardFormat } from '../types/enums';\n\nexport function getFormat(): Promise<ClipboardFormat> {\n    return sendMessage('clipboard.getFormat');\n};\n\nexport function readText(): Promise<string> {\n    return sendMessage('clipboard.readText');\n};\n\nexport function readImage(): Promise<ClipboardImage | null> {\n    return new Promise((resolve: any, reject: any) => {\n        sendMessage('clipboard.readImage')\n        .then((image: any) => {\n            if(image) {\n                image.data = base64ToBytesArray(image.data);\n            }\n            resolve(image);\n        })\n        .catch((error: any) => {\n            reject(error);\n        });\n    });\n};\n\nexport function writeText(data: string): Promise<void> {\n    return sendMessage('clipboard.writeText', { data });\n};\n\nexport function writeImage(image: ClipboardImage): Promise<void> {\n    const props: any = {...image};\n    if(image?.data) {\n        props.data = arrayBufferToBase64(image.data);\n    }\n    return sendMessage('clipboard.writeImage', props);\n};\n\nexport function clear(): Promise<void> {\n    return sendMessage('clipboard.clear');\n};\n","import { sendMessage } from '../ws/websocket';\nimport { base64ToBytesArray } from '../helpers';\n\nexport function getFiles(): Promise<string[]> {\n    return sendMessage('resources.getFiles');\n};\n\nexport function extractFile(path: string, destination: string): Promise<void> {\n    return sendMessage('resources.extractFile', { path, destination });\n};\n\nexport function readFile(path: string): Promise<string> {\n    return sendMessage('resources.readFile', { path });\n};\n\nexport function readBinaryFile(path: string): Promise<ArrayBuffer> {\n    return new Promise((resolve: any, reject: any) => {\n        sendMessage('resources.readBinaryFile', { path })\n        .then((base64Data: string) => {\n            resolve(base64ToBytesArray(base64Data));\n        })\n        .catch((error: any) => {\n            reject(error);\n        });\n    });\n};\n","import { sendMessage } from '../ws/websocket';\n\nexport function getMethods(): Promise<string[]> {\n    return sendMessage('custom.getMethods');\n};\n","import { version } from '../../package.json';\nimport * as websocket from '../ws/websocket';\nimport * as debug from './debug';\nimport * as events from './events';\nimport type { InitOptions } from '../types/api/init';\n\nlet initialized = false;\n\nexport function init(options: InitOptions = {}): void {\n    options = { exportCustomMethods: true ,...options };\n\n    if(initialized) {\n        return;\n    }\n\n    websocket.init();\n\n    if(window.NL_ARGS.find((arg) => arg == '--neu-dev-auto-reload')) {\n        events.on('neuDev_reloadApp', async () => {\n            await debug.log('Reloading the application...');\n            location.reload();\n        });\n    }\n\n    if(options.exportCustomMethods && window.NL_CMETHODS && window.NL_CMETHODS.length > 0) {\n        for(const method of window.NL_CMETHODS) {\n            Neutralino.custom[method] = (...args) => {\n                let data = {};\n                for(const [argi, argv] of args.entries()) {\n                    if(typeof argv == 'object' && !Array.isArray(argv) && argv != null) {\n                        data = {...data, ...argv};\n                    }\n                    else {\n                        data = {...data, ['arg' + argi]: argv};\n                    }\n                }\n                return websocket.sendMessage('custom.' + method, data);\n            };\n        }\n    }\n\n    window.NL_CVERSION = version;\n    window.NL_CCOMMIT = '425c526c318342e0e5d0f17caceef2a53049eda4'; // only the build server will update this\n    initialized = true;\n}\n"],"names":["dispatch","getStats","websocket.sendMessage","websocket.sendWhenExtReady","broadcast","init","events.on","extensions.getStats","events.dispatch","readFile","readBinaryFile","move","os.execCommand","filesystem.writeBinaryFile","websocket.init","debug.log"],"mappings":";;;;;;;;;;;;;;;;;aAGgBA,UAAQ,CAAC,WAAmB,EAAE,KAAa,EAAE,IAAU,EAAA;QACnE,OAAO,IAAI,OAAO,CAAC,CAAO,OAAY,EAAE,MAAW,KAAI,SAAA,CAAA,IAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;IACnD,QAAA,MAAM,KAAK,GAAG,MAAMC,UAAQ,EAAE,CAAC;YAC/B,IAAG,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;IACpC,YAAA,MAAM,CAAC;IACH,gBAAA,IAAI,EAAE,eAAe;oBACrB,OAAO,EAAE,CAAG,EAAA,WAAW,CAAgB,cAAA,CAAA;IAC1C,aAAA,CAAC,CAAC;aACN;iBACI,IAAG,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;IAC3C,YAAA,IAAI;IACA,gBAAA,MAAM,MAAM,GAAG,MAAMC,WAAqB,CAAC,qBAAqB,EAAE,EAAC,WAAW,EAAE,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC;oBAC9F,OAAO,CAAC,MAAM,CAAC,CAAC;iBACnB;gBACD,OAAM,GAAQ,EAAE;oBACZ,MAAM,CAAC,GAAG,CAAC,CAAC;iBACf;aACJ;iBACI;;IAED,YAAAC,gBAA0B,CAAC,WAAW,EAAE;IACpC,gBAAA,MAAM,EAAE,qBAAqB;oBAC7B,IAAI,EAAE,EAAC,WAAW,EAAE,KAAK,EAAE,IAAI,EAAC,EAAE,OAAO,EAAE,MAAM;IACpD,aAAA,CAAC,CAAC;aACN;SACJ,CAAA,CAAC,CAAC;IACP,CAAC;IAEe,SAAAC,WAAS,CAAC,KAAa,EAAE,IAAU,EAAA;IAC/C,IAAA,OAAOF,WAAqB,CAAC,sBAAsB,EAAE,EAAC,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC;IACxE,CAAC;aAEeD,UAAQ,GAAA;IACpB,IAAA,OAAOC,WAAqB,CAAC,qBAAqB,CAAC,CAAC;IACxD;;;;;;;;;ICnCgB,SAAA,EAAE,CAAC,KAAa,EAAE,OAAkC,EAAA;IAChE,IAAA,MAAM,CAAC,gBAAgB,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QACxC,OAAO,OAAO,CAAC,OAAO,CAAC;IACnB,QAAA,OAAO,EAAE,IAAI;IACb,QAAA,OAAO,EAAE,sBAAsB;IAClC,KAAA,CAAC,CAAC;IACP,CAAC;IAEe,SAAA,GAAG,CAAC,KAAa,EAAE,OAAkC,EAAA;IACjE,IAAA,MAAM,CAAC,mBAAmB,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAC3C,OAAO,OAAO,CAAC,OAAO,CAAC;IACnB,QAAA,OAAO,EAAE,IAAI;IACb,QAAA,OAAO,EAAE,wBAAwB;IACpC,KAAA,CAAC,CAAC;IACP,CAAC;IAEe,SAAA,QAAQ,CAAC,KAAa,EAAE,IAAU,EAAA;IAC9C,IAAA,MAAM,WAAW,GAAG,IAAI,WAAW,CAAC,KAAK,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC,CAAC,CAAC;IAC3D,IAAA,MAAM,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;QAClC,OAAO,OAAO,CAAC,OAAO,CAAC;IACnB,QAAA,OAAO,EAAE,IAAI;IACb,QAAA,OAAO,EAAE,oBAAoB;IAChC,KAAA,CAAC,CAAC;IACP;;ICzBM,SAAU,kBAAkB,CAAC,IAAY,EAAA;QAC3C,MAAM,UAAU,GAAW,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7C,IAAA,MAAM,GAAG,GAAW,UAAU,CAAC,MAAM,CAAC;IACtC,IAAA,MAAM,KAAK,GAAe,IAAI,UAAU,CAAC,GAAG,CAAC,CAAC;IAE9C,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC1B,KAAK,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;SACvC;QAED,OAAO,KAAK,CAAC,MAAM,CAAC;IACxB,CAAC;IAEK,SAAU,mBAAmB,CAAC,IAAiB,EAAA;IACjD,IAAA,IAAI,KAAK,GAAe,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC;QAC7C,IAAI,QAAQ,GAAW,EAAE,CAAC;IAE1B,IAAA,KAAI,IAAI,IAAI,IAAI,KAAK,EAAE;IACnB,QAAA,QAAQ,IAAI,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;SACzC;IAED,IAAA,OAAO,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACjC;;ICjBA,IAAI,EAAE,CAAC;IACP,MAAM,WAAW,GAAG,EAAE,CAAC;IACvB,MAAM,mBAAmB,GAAG,EAAE,CAAC;IAC/B,MAAM,qBAAqB,GAAG,EAAE,CAAA;aAEhBG,MAAI,GAAA;IAChB,IAAA,QAAQ,EAAE,CAAC;IACX,IAAA,MAAM,YAAY,GAAW,YAAY,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1D,IAAA,MAAM,QAAQ,GAAW,CAAC,MAAM,CAAC,YAAY,IAAI,MAAM,CAAC,YAAY;YAC5C,WAAW,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;IAC/D,IAAA,EAAE,GAAG,IAAI,SAAS,CAAC,QAAQ,QAAQ,CAAA,CAAA,EAAI,MAAM,CAAC,OAAO,CAAA,cAAA,EAAiB,YAAY,CAAA,CAAE,CAAC,CAAC;IACtF,IAAA,qBAAqB,EAAE,CAAC;IACxB,IAAA,oBAAoB,EAAE,CAAC;IAC3B,CAAC;IAEe,SAAA,WAAW,CAAC,MAAc,EAAE,IAAU,EAAA;QAClD,OAAO,IAAI,OAAO,CAAC,CAAC,OAAY,EAAE,MAAW,KAAI;IAE7C,QAAA,IAAG,CAAA,EAAE,KAAF,IAAA,IAAA,EAAE,KAAF,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAE,CAAE,UAAU,KAAI,SAAS,CAAC,IAAI,EAAE;gBACjC,aAAa,CAAC,EAAC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAC,CAAC,CAAC;gBAC/C,OAAO;aACV;IAED,QAAA,MAAM,EAAE,GAAW,MAAM,EAAE,CAAC;IAC5B,QAAA,MAAM,WAAW,GAAW,YAAY,EAAE,CAAC;YAE3C,WAAW,CAAC,EAAE,CAAC,GAAG,EAAC,OAAO,EAAE,MAAM,EAAC,CAAC;IAEpC,QAAA,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;gBACnB,EAAE;gBACF,MAAM;gBACN,IAAI;gBACJ,WAAW;IACd,SAAA,CAAC,CAAC,CAAC;IAER,KAAC,CAAC,CAAC;IACP,CAAC;IAEK,SAAU,aAAa,CAAC,OAAY,EAAA;IACtC,IAAA,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACtC,CAAC;IAEe,SAAA,gBAAgB,CAAC,WAAmB,EAAE,OAAY,EAAA;IAC9D,IAAA,IAAG,WAAW,IAAI,qBAAqB,EAAE;YACrC,qBAAqB,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACpD;aACI;IACD,QAAA,qBAAqB,CAAC,WAAW,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;SAClD;IACL,CAAC;IAED,SAAS,qBAAqB,GAAA;IAC1B,IAAAC,EAAS,CAAC,OAAO,EAAE,MAAW,SAAA,CAAA,IAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;IAC1B,QAAA,MAAM,YAAY,CAAC,mBAAmB,CAAC,CAAC;IAExC,QAAA,IAAG,CAAC,MAAM,CAAC,aAAa,EAAE;gBACtB,OAAO;aACV;IAED,QAAA,MAAM,KAAK,GAAG,MAAMC,UAAmB,EAAE,CAAC;IAC1C,QAAA,KAAI,MAAM,SAAS,IAAI,KAAK,CAAC,SAAS,EAAE;IACpC,YAAAC,QAAe,CAAC,gBAAgB,EAAE,SAAS,CAAC,CAAC;aAChD;SACJ,CAAA,CAAC,CAAC;QAEHF,EAAS,CAAC,kBAAkB,EAAE,CAAC,GAAG,KAAI;YAClCE,QAAe,CAAC,gBAAgB,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;IAClD,KAAC,CAAC,CAAC;IAEH,IAAA,IAAG,CAAC,MAAM,CAAC,aAAa,EAAE;YACtB,OAAO;SACV;QAEDF,EAAS,CAAC,gBAAgB,EAAE,CAAO,GAAG,KAAI,SAAA,CAAA,IAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;IACtC,QAAA,IAAG,GAAG,CAAC,MAAM,IAAI,qBAAqB,EAAE;gBACpC,MAAM,YAAY,CAAC,qBAAqB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;IACtD,YAAA,OAAO,qBAAqB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;aAC5C;SACJ,CAAA,CAAC,CAAC;IACP,CAAC;IAED,SAAS,oBAAoB,GAAA;QACzB,EAAE,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,KAAK,KAAI;;YACrC,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YAEvC,IAAG,OAAO,CAAC,EAAE,IAAI,OAAO,CAAC,EAAE,IAAI,WAAW,EAAE;;IAExC,YAAA,IAAG,MAAA,OAAO,CAAC,IAAI,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,KAAK,EAAE;IACpB,gBAAA,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACnD,IAAG,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,eAAe,EAAE;;IAE3C,oBAAA,4BAA4B,EAAE,CAAC;qBAClC;iBACJ;IACI,iBAAA,IAAG,MAAA,OAAO,CAAC,IAAI,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,OAAO,EAAE;IAC3B,gBAAA,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC;IAClB,qBAAA,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,WAAW;IAC1E,sBAAE,OAAO,CAAC,IAAI,CAAC,CAAC;iBAC3B;IACD,YAAA,OAAO,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;aAClC;IACI,aAAA,IAAG,OAAO,CAAC,KAAK,EAAE;;gBAEnB,IAAG,OAAO,CAAC,KAAK,IAAI,YAAY,IAAI,CAAA,MAAA,OAAO,KAAA,IAAA,IAAP,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,OAAO,CAAE,IAAI,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,MAAM,KAAI,YAAY,EAAE;IACvE,gBAAA,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG,kBAAkB,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC7D;gBACDE,QAAe,CAAC,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC;aAChD;IACL,KAAC,CAAC,CAAC;QAEH,EAAE,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAO,KAAK,KAAI,SAAA,CAAA,IAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;IACxC,QAAAA,QAAe,CAAC,OAAO,CAAC,CAAC;SAC5B,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAO,KAAK,KAAI,SAAA,CAAA,IAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;IACzC,QAAA,MAAM,KAAK,GAAG;IACV,YAAA,IAAI,EAAE,eAAe;IACrB,YAAA,OAAO,EAAE,8DAA8D;aAC1E,CAAC;IACF,QAAAA,QAAe,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;SAC3C,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAO,KAAK,KAAI,SAAA,CAAA,IAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;IACzC,QAAA,kBAAkB,EAAE,CAAC;SACxB,CAAA,CAAC,CAAC;IACP,CAAC;IAED,SAAe,YAAY,CAAC,YAAmB,EAAA;;IAC3C,QAAA,OAAM,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;IAC3B,YAAA,MAAM,OAAO,GAAG,YAAY,CAAC,KAAK,EAAE,CAAC;IACrC,YAAA,IAAI;IACA,gBAAA,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC;IACjE,gBAAA,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;iBAC7B;gBACD,OAAM,GAAQ,EAAE;IACZ,gBAAA,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;iBACvB;aACJ;SACJ,CAAA,CAAA;IAAA,CAAA;IAED,SAAS,4BAA4B,GAAA;QACjC,EAAE,CAAC,KAAK,EAAE,CAAC;IACX,IAAA,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QAC7B,QAAQ,CAAC,KAAK,CAAC,6DAA6D;IAC5C,QAAA,iEAAiE,CAAC,CAAC;IACvG,CAAC;IAED,SAAS,kBAAkB,GAAA;IACvB,IAAA,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QAC7B,QAAQ,CAAC,KAAK,CAAC,6DAA6D;IAC5C,QAAA,+DAA+D,CAAC,CAAC;IACrG,CAAC;IAED,SAAS,QAAQ,GAAA;IACb,IAAA,IAAI,MAAM,CAAC,QAAQ,EAAE;YACjB,cAAc,CAAC,OAAO,CAAC,UAAU,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC;SACvD;IACL,CAAC;IACD,SAAS,YAAY,GAAA;IACjB,IAAA,OAAO,MAAM,CAAC,QAAQ,IAAI,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;IACvE,CAAC;IAED;IACA,SAAS,MAAM,GAAA;IACb,IAAA,OAAO,sCAAsC,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAM,KACrE,CAAC,CAAC,GAAG,MAAM,CAAC,eAAe,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,EAAE,CAAC,CAC9E,CAAC;IACJ;;IC9JM,SAAU,eAAe,CAAC,IAAY,EAAA;QACxC,OAAO,WAAW,CAAC,4BAA4B,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IAC/D,CAAC;IAEK,SAAU,MAAM,CAAC,IAAY,EAAA;QAC/B,OAAO,WAAW,CAAC,mBAAmB,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IACtD,CAAC;IAEe,SAAA,SAAS,CAAC,IAAY,EAAE,IAAY,EAAA;QAChD,OAAO,WAAW,CAAC,sBAAsB,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;IAC/D,CAAC;IAEe,SAAA,UAAU,CAAC,IAAY,EAAE,IAAY,EAAA;QACjD,OAAO,WAAW,CAAC,uBAAuB,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;IAChE,CAAC;IAEe,SAAA,eAAe,CAAC,IAAY,EAAE,IAAiB,EAAA;QAC3D,OAAO,WAAW,CAAC,4BAA4B,EAAE;YAC7C,IAAI;IACJ,QAAA,IAAI,EAAE,mBAAmB,CAAC,IAAI,CAAC;IAClC,KAAA,CAAC,CAAC;IACP,CAAC;IAEe,SAAA,gBAAgB,CAAC,IAAY,EAAE,IAAiB,EAAA;QAC5D,OAAO,WAAW,CAAC,6BAA6B,EAAE;YAC9C,IAAI;IACJ,QAAA,IAAI,EAAE,mBAAmB,CAAC,IAAI,CAAC;IAClC,KAAA,CAAC,CAAC;IACP,CAAC;IAEe,SAAAC,UAAQ,CAAC,IAAY,EAAE,OAA2B,EAAA;QAC9D,OAAO,WAAW,CAAC,qBAAqB,EAAA,MAAA,CAAA,MAAA,CAAA,EAAI,IAAI,EAAK,EAAA,OAAO,EAAG,CAAC;IACpE,CAAC;IAEe,SAAAC,gBAAc,CAAC,IAAY,EAAE,OAA2B,EAAA;QACpE,OAAO,IAAI,OAAO,CAAC,CAAC,OAAY,EAAE,MAAW,KAAI;IAC7C,QAAA,WAAW,CAAC,2BAA2B,EAAA,MAAA,CAAA,MAAA,CAAA,EAAI,IAAI,EAAA,EAAK,OAAO,CAAG,CAAA;IAC7D,aAAA,IAAI,CAAC,CAAC,UAAkB,KAAI;IACzB,YAAA,OAAO,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC,CAAC;IAC5C,SAAC,CAAC;IACD,aAAA,KAAK,CAAC,CAAC,KAAU,KAAI;gBAClB,MAAM,CAAC,KAAK,CAAC,CAAC;IAClB,SAAC,CAAC,CAAC;IACP,KAAC,CAAC,CAAC;IACP,CAAC;IAEK,SAAU,QAAQ,CAAC,IAAY,EAAA;QACjC,OAAO,WAAW,CAAC,qBAAqB,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IACxD,CAAC;IAEK,SAAU,aAAa,CAAC,IAAY,EAAA;QACtC,OAAO,WAAW,CAAC,0BAA0B,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IAC7D,CAAC;IAEK,SAAU,aAAa,CAAC,EAAU,EAAA;QACpC,OAAO,WAAW,CAAC,0BAA0B,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;IAC3D,CAAC;aAEe,WAAW,GAAA;IACvB,IAAA,OAAO,WAAW,CAAC,wBAAwB,CAAC,CAAC;IACjD,CAAC;aAEe,gBAAgB,CAAC,EAAU,EAAE,KAAa,EAAE,IAAU,EAAA;IAClE,IAAA,OAAO,WAAW,CAAC,6BAA6B,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;IAC3E,CAAC;IAEK,SAAU,iBAAiB,CAAC,EAAU,EAAA;QACxC,OAAO,WAAW,CAAC,8BAA8B,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;IAC/D,CAAC;IAEe,SAAA,aAAa,CAAC,IAAY,EAAE,OAAgC,EAAA;QACxE,OAAO,WAAW,CAAC,0BAA0B,EAAA,MAAA,CAAA,MAAA,CAAA,EAAI,IAAI,EAAK,EAAA,OAAO,EAAG,CAAC;IACzE,CAAC;aAEe,IAAI,CAAC,MAAc,EAAE,WAAmB,EAAE,OAAqB,EAAA;QAC3E,OAAO,WAAW,CAAC,iBAAiB,EAAI,MAAA,CAAA,MAAA,CAAA,EAAA,MAAM,EAAE,WAAW,EAAA,EAAK,OAAO,CAAA,CAAI,CAAC;IAChF,CAAC;IAEe,SAAAC,MAAI,CAAC,MAAc,EAAE,WAAmB,EAAA;QACpD,OAAO,WAAW,CAAC,iBAAiB,EAAE,EAAE,MAAM,EAAE,WAAW,EAAE,CAAC,CAAC;IACnE,CAAC;IAEK,SAAU,QAAQ,CAAC,IAAY,EAAA;QACjC,OAAO,WAAW,CAAC,qBAAqB,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IACxD,CAAC;IAEK,SAAU,eAAe,CAAC,IAAY,EAAA;QACxC,OAAO,WAAW,CAAC,4BAA4B,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IAC/D,CAAC;IAEe,SAAA,eAAe,CAAC,IAAY,EAAE,IAAa,EAAA;QACvD,OAAO,WAAW,CAAC,4BAA4B,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;IACrE,CAAC;IAEK,SAAU,YAAY,CAAC,IAAY,EAAA;QACrC,OAAO,WAAW,CAAC,yBAAyB,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IAC5D;;;;;;;;;;;;;;;;;;;;;;;;;;;IC/FgB,SAAA,WAAW,CAAC,OAAe,EAAE,OAA4B,EAAA;QACrE,OAAO,WAAW,CAAC,gBAAgB,EAAA,MAAA,CAAA,MAAA,CAAA,EAAI,OAAO,EAAK,EAAA,OAAO,EAAG,CAAC;IAClE,CAAC;IAEe,SAAA,YAAY,CAAC,OAAe,EAAE,GAAY,EAAA;QACtD,OAAO,WAAW,CAAC,iBAAiB,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,CAAC;IAC5D,CAAC;aAEe,oBAAoB,CAAC,EAAU,EAAE,KAAa,EAAE,IAAU,EAAA;IACtE,IAAA,OAAO,WAAW,CAAC,yBAAyB,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;IACvE,CAAC;aAEe,mBAAmB,GAAA;IAC/B,IAAA,OAAO,WAAW,CAAC,wBAAwB,CAAC,CAAC;IACjD,CAAC;IAEK,SAAU,MAAM,CAAC,GAAW,EAAA;QAC9B,OAAO,WAAW,CAAC,WAAW,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;IAC7C,CAAC;aAEe,OAAO,GAAA;IACnB,IAAA,OAAO,WAAW,CAAC,YAAY,CAAC,CAAC;IACrC,CAAC;IAEe,SAAA,cAAc,CAAC,KAAc,EAAE,OAA2B,EAAA;QACtE,OAAO,WAAW,CAAC,mBAAmB,EAAA,MAAA,CAAA,MAAA,CAAA,EAAI,KAAK,EAAK,EAAA,OAAO,EAAG,CAAC;IACnE,CAAC;IAEe,SAAA,gBAAgB,CAAC,KAAc,EAAE,OAA6B,EAAA;QAC1E,OAAO,WAAW,CAAC,qBAAqB,EAAA,MAAA,CAAA,MAAA,CAAA,EAAI,KAAK,EAAK,EAAA,OAAO,EAAG,CAAC;IACrE,CAAC;IAEe,SAAA,cAAc,CAAC,KAAc,EAAE,OAA2B,EAAA;QACtE,OAAO,WAAW,CAAC,mBAAmB,EAAA,MAAA,CAAA,MAAA,CAAA,EAAI,KAAK,EAAK,EAAA,OAAO,EAAG,CAAC;IACnE,CAAC;aAEe,gBAAgB,CAAC,KAAa,EAAE,OAAe,EAAE,IAAW,EAAA;IACxE,IAAA,OAAO,WAAW,CAAC,qBAAqB,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;IACxE,CAAC;IAEK,SAAU,cAAc,CAAC,KAAa,EAAE,OAAe,EAC7C,MAAyB,EAAE,IAAW,EAAA;IAClD,IAAA,OAAO,WAAW,CAAC,mBAAmB,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;IAC9E,CAAC;IAEK,SAAU,OAAO,CAAC,OAAoB,EAAA;IACxC,IAAA,OAAO,WAAW,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;IAC9C,CAAC;IAEK,SAAU,IAAI,CAAC,GAAW,EAAA;QAC5B,OAAO,WAAW,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;IAC3C,CAAC;IAEK,SAAU,OAAO,CAAC,IAAe,EAAA;QACnC,OAAO,WAAW,CAAC,YAAY,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IAC/C;;;;;;;;;;;;;;;;;;;;aC3DgB,aAAa,GAAA;IACzB,IAAA,OAAO,WAAW,CAAC,wBAAwB,CAAC,CAAC;IACjD,CAAC;aAEe,OAAO,GAAA;IACnB,IAAA,OAAO,WAAW,CAAC,kBAAkB,CAAC,CAAC;IAC3C,CAAC;aAEe,aAAa,GAAA;IACzB,IAAA,OAAO,WAAW,CAAC,wBAAwB,CAAC,CAAC;IACjD,CAAC;aAEe,SAAS,GAAA;IACrB,IAAA,OAAO,WAAW,CAAC,oBAAoB,CAAC,CAAC;IAC7C,CAAC;aAEe,UAAU,GAAA;IACtB,IAAA,OAAO,WAAW,CAAC,qBAAqB,CAAC,CAAC;IAC9C,CAAC;aAEe,WAAW,GAAA;IACvB,IAAA,OAAO,WAAW,CAAC,sBAAsB,CAAC,CAAC;IAC/C,CAAC;aAEe,gBAAgB,GAAA;IAC5B,IAAA,OAAO,WAAW,CAAC,2BAA2B,CAAC,CAAC;IACpD;;;;;;;;;;;;;IClCgB,SAAA,OAAO,CAAC,GAAW,EAAE,IAAY,EAAA;QAC7C,OAAO,WAAW,CAAC,iBAAiB,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;IACzD,CAAC;IAEK,SAAU,OAAO,CAAC,GAAW,EAAA;QAC/B,OAAO,WAAW,CAAC,iBAAiB,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;IACnD,CAAC;aAEe,OAAO,GAAA;IACnB,IAAA,OAAO,WAAW,CAAC,iBAAiB,CAAC,CAAC;IAC1C;;;;;;;;;ICTgB,SAAA,GAAG,CAAC,OAAe,EAAE,IAAiB,EAAA;QAClD,OAAO,WAAW,CAAC,WAAW,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;IACvD;;;;;;;ICDM,SAAU,IAAI,CAAC,IAAa,EAAA;QAC9B,OAAO,WAAW,CAAC,UAAU,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IAC7C,CAAC;aAEe,WAAW,GAAA;IACvB,IAAA,OAAO,WAAW,CAAC,iBAAiB,CAAC,CAAC;IAC1C,CAAC;IAEK,SAAU,cAAc,CAAC,OAAwB,EAAA;IACnD,IAAA,OAAO,IAAI,OAAO,CAAC,CAAO,OAAmB,KAAI,SAAA,CAAA,IAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;IAC7C,QAAA,IAAI,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAW,EAAE,GAAW,KAAI;IAC7D,YAAA,IAAG,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;IAClB,gBAAA,GAAG,GAAG,CAAA,CAAA,EAAI,GAAG,CAAA,CAAA,CAAG,CAAA;iBACnB;IACD,YAAA,GAAG,IAAI,GAAG,GAAG,GAAG,CAAC;IACjB,YAAA,OAAO,GAAG,CAAC;aACd,EAAE,EAAE,CAAC,CAAC;YAEP,IAAG,OAAO,aAAP,OAAO,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAP,OAAO,CAAE,IAAI,EAAE;IACd,YAAA,OAAO,IAAI,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC;aACjC;IAED,QAAA,MAAMC,WAAc,CAAC,OAAO,EAAE,EAAC,UAAU,EAAE,IAAI,EAAC,CAAC,CAAC;IAClD,QAAA,IAAI,EAAE,CAAC;IACP,QAAA,OAAO,EAAE,CAAC;SACb,CAAA,CAAC,CAAC;IACP,CAAC;aAEe,SAAS,GAAA;IACrB,IAAA,OAAO,WAAW,CAAC,eAAe,CAAC,CAAC;IACxC,CAAC;IAEe,SAAAR,WAAS,CAAC,KAAa,EAAE,IAAU,EAAA;QAC/C,OAAO,WAAW,CAAC,eAAe,EAAE,EAAC,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC;IACvD,CAAC;IAEK,SAAU,gBAAgB,CAAC,OAAiB,EAAA;QAC9C,OAAO,WAAW,CAAC,sBAAsB,EAAE,EAAE,OAAO,EAAE,CAAC,CAAC;IAC5D,CAAC;IAEK,SAAU,kBAAkB,CAAC,IAAY,EAAA;QAC3C,OAAO,WAAW,CAAC,wBAAwB,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IAC3D,CAAC;IAEK,SAAU,iBAAiB,CAAC,IAAY,EAAA;QAC1C,OAAO,WAAW,CAAC,uBAAuB,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IAC1D;;;;;;;;;;;;;;IC1CA,MAAM,gBAAgB,GAGjB,IAAI,OAAO,EAAE,CAAC;IAEb,SAAU,QAAQ,CAAC,KAAa,EAAA;QAClC,OAAO,WAAW,CAAC,iBAAiB,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;IACrD,CAAC;aAEe,QAAQ,GAAA;IACpB,IAAA,OAAO,WAAW,CAAC,iBAAiB,CAAC,CAAC;IAC1C,CAAC;aAEe,QAAQ,GAAA;IACpB,IAAA,OAAO,WAAW,CAAC,iBAAiB,CAAC,CAAC;IAC1C,CAAC;aAEe,UAAU,GAAA;IACtB,IAAA,OAAO,WAAW,CAAC,mBAAmB,CAAC,CAAC;IAC5C,CAAC;aAEe,WAAW,GAAA;IACvB,IAAA,OAAO,WAAW,CAAC,oBAAoB,CAAC,CAAC;IAC7C,CAAC;aAEe,QAAQ,GAAA;IACpB,IAAA,OAAO,WAAW,CAAC,iBAAiB,CAAC,CAAC;IAC1C,CAAC;aAEe,UAAU,GAAA;IACtB,IAAA,OAAO,WAAW,CAAC,mBAAmB,CAAC,CAAC;IAC5C,CAAC;aAEe,WAAW,GAAA;IACvB,IAAA,OAAO,WAAW,CAAC,oBAAoB,CAAC,CAAC;IAC7C,CAAC;aAEe,aAAa,GAAA;IACzB,IAAA,OAAO,WAAW,CAAC,sBAAsB,CAAC,CAAC;IAC/C,CAAC;aAEe,cAAc,GAAA;IAC1B,IAAA,OAAO,WAAW,CAAC,uBAAuB,CAAC,CAAC;IAChD,CAAC;aAEe,YAAY,GAAA;IACxB,IAAA,OAAO,WAAW,CAAC,qBAAqB,CAAC,CAAC;IAC9C,CAAC;aAEe,IAAI,GAAA;IAChB,IAAA,OAAO,WAAW,CAAC,aAAa,CAAC,CAAC;IACtC,CAAC;aAEe,IAAI,GAAA;IAChB,IAAA,OAAO,WAAW,CAAC,aAAa,CAAC,CAAC;IACtC,CAAC;aAEe,SAAS,GAAA;IACrB,IAAA,OAAO,WAAW,CAAC,kBAAkB,CAAC,CAAC;IAC3C,CAAC;aAEe,KAAK,GAAA;IACjB,IAAA,OAAO,WAAW,CAAC,cAAc,CAAC,CAAC;IACvC,CAAC;IAEK,SAAU,OAAO,CAAC,IAAY,EAAA;QAChC,OAAO,WAAW,CAAC,gBAAgB,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IACnD,CAAC;IAEe,SAAA,IAAI,CAAC,CAAS,EAAE,CAAS,EAAA;QACrC,OAAO,WAAW,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAChD,CAAC;aAEe,MAAM,GAAA;IAClB,IAAA,OAAO,WAAW,CAAC,eAAe,CAAC,CAAC;IACxC,CAAC;aAkBe,kBAAkB,CAAC,cAAoC,EAAE,UAAkC,EAAE,EAAA;QAIzG,OAAO,IAAI,OAAO,CAAiD,CAAC,OAAO,EAAE,MAAM,KAAI;IACnF,QAAA,MAAM,eAAe,GAAgB,cAAc,YAAY,OAAO;gBAC1B,cAAc,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;YACrG,IAAI,cAAc,GAAW,CAAC,CAAC;YAC/B,IAAI,cAAc,GAAW,CAAC,CAAC;YAC/B,IAAI,uBAAuB,GAAW,CAAC,CAAC;YACxC,IAAI,gBAAgB,GAAG,KAAK,CAAC;IAC7B,QAAA,IAAI,iBAAiB,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;IAC1C,QAAA,IAAI,iBAAiB,GAAG,OAAO,CAAC,aAAa,CAAC;YAE9C,IAAI,CAAC,eAAe,EAAE;IAClB,YAAA,OAAO,MAAM,CAAC;IACV,gBAAA,IAAI,EAAE,eAAe;IACrB,gBAAA,OAAO,EAAE,4BAA4B;IACxC,aAAA,CAAC,CAAC;aACN;IAED,QAAA,IAAI,gBAAgB,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;IACvC,YAAA,OAAO,MAAM,CAAC;IACV,gBAAA,IAAI,EAAE,eAAe;IACrB,gBAAA,OAAO,EAAE,wDAAwD;IACpE,aAAA,CAAC,CAAC;aACN;IAED,QAAA,eAAe,CAAC,gBAAgB,CAAC,aAAa,EAAE,qBAAqB,CAAC,CAAC;IACvE,QAAA,eAAe,CAAC,gBAAgB,CAAC,WAAW,EAAE,mBAAmB,CAAC,CAAC;IACnE,QAAA,eAAe,CAAC,gBAAgB,CAAC,eAAe,EAAE,mBAAmB,CAAC,CAAC;IAEvE,QAAA,gBAAgB,CAAC,GAAG,CAAC,eAAe,EAAE,EAAE,WAAW,EAAE,qBAAqB,EAAE,SAAS,EAAE,mBAAmB,EAAE,CAAC,CAAC;YAE9G,SAAe,aAAa,CAAC,GAAiB,EAAA;;;;IAE1C,gBAAA,MAAM,EAAE,GAAG,GAAG,CAAC,OAAO,GAAG,cAAc,EACjC,EAAE,GAAG,GAAG,CAAC,OAAO,GAAG,cAAc,CAAC;IACxC,gBAAA,uBAAuB,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;;;oBAGvD,IAAI,uBAAuB,KAAK,CAAA,EAAA,GAAA,OAAO,CAAC,eAAe,MAAI,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,EAAE,CAAC,EAAE;wBAC5D,gBAAgB,GAAG,IAAI,CAAC;wBACxB,IAAI,CAAC,iBAAiB,EAAE;IACpB,wBAAA,eAAe,CAAC,iBAAiB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;4BACjD,iBAAiB,GAAG,IAAI,CAAC;yBAC5B;qBACJ;oBAED,IAAI,gBAAgB,EAAE;IAElB,oBAAA,MAAM,mBAAmB,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;IAC9C,oBAAA,MAAM,gBAAgB,GAAG,mBAAmB,GAAG,iBAAiB,CAAC;;IAEjE,oBAAA,IAAI,gBAAgB,GAAG,CAAC,EAAE;;4BAEtB,OAAO;yBACV;;wBAGD,iBAAiB,GAAG,mBAAmB,IAAI,gBAAgB,GAAG,CAAC,CAAC,CAAC;IAEjE,oBAAA,MAAM,IAAI,CACN,GAAG,CAAC,OAAO,GAAG,cAAc,EAC5B,GAAG,CAAC,OAAO,GAAG,cAAc,CAC/B,CAAC;wBAEF,OAAO;qBACV;iBACJ,CAAA,CAAA;IAAA,SAAA;YAED,SAAS,qBAAqB,CAAC,GAAiB,EAAA;IAC5C,YAAA,IAAI,GAAG,CAAC,MAAM,KAAK,CAAC;oBAAE,OAAO;IAC7B,YAAA,cAAc,GAAG,GAAG,CAAC,OAAO,CAAC;IAC7B,YAAA,cAAc,GAAG,GAAG,CAAC,OAAO,CAAC;IAC7B,YAAA,eAAe,CAAC,gBAAgB,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC;IAC/D,YAAA,IAAI,OAAO,CAAC,aAAa,EAAE;IACvB,gBAAA,eAAe,CAAC,iBAAiB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;iBACpD;aACJ;YAED,SAAS,mBAAmB,CAAC,GAAiB,EAAA;IAC1C,YAAA,eAAe,CAAC,mBAAmB,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC;IAClE,YAAA,eAAe,CAAC,qBAAqB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;aACxD;IAED,QAAA,OAAO,CAAC;IACJ,YAAA,OAAO,EAAE,IAAI;IACb,YAAA,OAAO,EAAE,gCAAgC;IAC5C,SAAA,CAAC,CAAC;IACP,KAAC,CAAC,CAAC;IACP,CAAC;IAEK,SAAU,oBAAoB,CAAC,cAAoC,EAAA;QAIvE,OAAO,IAAI,OAAO,CAAmD,CAAC,OAAO,EAAE,MAAM,KAAI;IACnF,QAAA,MAAM,eAAe,GAAgB,cAAc,YAAY,OAAO;gBAC9B,cAAc,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;YAEjG,IAAI,CAAC,eAAe,EAAE;IAClB,YAAA,OAAO,MAAM,CAAC;IACV,gBAAA,IAAI,EAAE,eAAe;IACrB,gBAAA,OAAO,EAAE,4BAA4B;IACxC,aAAA,CAAC,CAAC;aACN;YACD,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;IACxC,YAAA,OAAO,MAAM,CAAC;IACV,gBAAA,IAAI,EAAE,eAAe;IACrB,gBAAA,OAAO,EAAE,+CAA+C;IAC3D,aAAA,CAAC,CAAC;aACN;IAED,QAAA,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG,gBAAgB,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;IACzE,QAAA,eAAe,CAAC,mBAAmB,CAAC,aAAa,EAAE,WAAW,CAAC,CAAC;IAChE,QAAA,eAAe,CAAC,mBAAmB,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;IAC5D,QAAA,eAAe,CAAC,mBAAmB,CAAC,eAAe,EAAE,SAAS,CAAC,CAAC;IAChE,QAAA,gBAAgB,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;IAEzC,QAAA,OAAO,CAAC;IACJ,YAAA,OAAO,EAAE,IAAI;IACb,YAAA,OAAO,EAAE,kCAAkC;IAC9C,SAAA,CAAC,CAAC;IACT,KAAC,CAAC,CAAC;IACL,CAAC;IAEK,SAAU,OAAO,CAAC,OAA0B,EAAA;QAC9C,OAAO,IAAI,OAAO,CAAC,CAAO,OAAY,EAAE,MAAW,KAAI,SAAA,CAAA,IAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;IACnD,QAAA,IAAI,WAAW,GAAG,MAAM,OAAO,EAAE,CAAC;IAElC,QAAA,OAAO,mCAAO,WAAW,CAAA,EAAK,OAAO,CAAC,CAAC;IAEvC,QAAA,WAAW,CAAC,gBAAgB,EAAE,OAAO,CAAC;IACjC,aAAA,IAAI,CAAC,CAAC,QAAa,KAAI;gBACpB,OAAO,CAAC,QAAQ,CAAC,CAAC;IACtB,SAAC,CAAC;IACD,aAAA,KAAK,CAAC,CAAC,KAAU,KAAI;gBAClB,MAAM,CAAC,KAAK,CAAC,CAAC;IAClB,SAAC,CAAC,CAAC;SACV,CAAA,CAAC,CAAC;IACP,CAAC;aAEe,OAAO,GAAA;IACnB,IAAA,OAAO,WAAW,CAAC,gBAAgB,CAAC,CAAC;IACzC,CAAC;aAEe,WAAW,GAAA;IACvB,IAAA,OAAO,WAAW,CAAC,oBAAoB,CAAC,CAAC;IAC7C,CAAC;IAEK,SAAU,cAAc,CAAC,KAAc,EAAA;QACzC,OAAO,WAAW,CAAC,uBAAuB,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;IAC3D,CAAC;IAEe,SAAA,MAAM,CAAC,GAAW,EAAE,OAAuB,EAAA;QACvD,OAAO,IAAI,OAAO,CAAC,CAAC,OAAY,EAAE,MAAW,KAAI;IAE7C,QAAA,OAAO,mCAAQ,OAAO,CAAA,EAAA,EAAE,aAAa,EAAE,KAAK,GAAE,CAAC;;YAG/C,SAAS,SAAS,CAAC,GAAQ,EAAA;gBACvB,IAAG,OAAO,GAAG,IAAI,QAAQ;IACrB,gBAAA,OAAO,GAAG,CAAC;IACf,YAAA,GAAG,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;IACjB,YAAA,IAAG,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;IAClB,gBAAA,GAAG,GAAG,CAAA,CAAA,EAAI,GAAG,CAAA,CAAA,CAAG,CAAC;iBACpB;IACD,YAAA,OAAO,GAAG,CAAC;aACd;IAED,QAAA,IAAI,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAW,EAAE,GAAW,EAAE,KAAa,KAAI;IAC5E,YAAA,IAAG,GAAG,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,GAAG,CAAC,QAAQ,CAAC,cAAc,CAAC;oBACtD,GAAG,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,KAAK,IAAI,CAAC,EAAE;IAC9C,gBAAA,GAAG,IAAI,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC;iBAC/B;IACD,YAAA,OAAO,GAAG,CAAC;aACd,EAAE,EAAE,CAAC,CAAC;IAEP,QAAA,OAAO,IAAI,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC;IAEtC,QAAA,KAAI,IAAI,GAAG,IAAI,OAAO,EAAE;gBACpB,IAAG,GAAG,IAAI,aAAa;oBACnB,SAAS;IAEb,YAAA,IAAI,MAAM,GAAW,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC,WAAW,EAAE,CAAC;IACjF,YAAA,OAAO,IAAI,CAAA,SAAA,EAAY,MAAM,CAAA,CAAA,EAAI,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAA,CAAE,CAAA;aAC7D;IAED,QAAA,IAAG,OAAO,IAAI,OAAO,CAAC,WAAW;IAC7B,YAAA,OAAO,IAAI,GAAG,GAAG,OAAO,CAAC,WAAW,CAAC;YAEzCQ,WAAc,CAAC,OAAO,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;IACxC,aAAA,IAAI,CAAC,CAAC,WAAgB,KAAI;gBACvB,OAAO,CAAC,WAAW,CAAC,CAAC;IACzB,SAAC,CAAC;IACD,aAAA,KAAK,CAAC,CAAC,KAAU,KAAI;gBAClB,MAAM,CAAC,KAAK,CAAC,CAAC;IAClB,SAAC,CAAC,CAAC;IACX,KAAC,CAAC,CAAC;IACP;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICzSgB,SAAA,SAAS,CAAC,KAAa,EAAE,IAAU,EAAA;QAC/C,OAAO,WAAW,CAAC,kBAAkB,EAAE,EAAC,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC;IAC1D;;;;;;;;;;ICFA,IAAI,QAAQ,GAAa,IAAI,CAAC;IAExB,SAAU,eAAe,CAAC,GAAW,EAAA;QACvC,SAAS,eAAe,CAAC,QAAkB,EAAA;YACvC,IAAG,QAAQ,CAAC,aAAa,IAAI,QAAQ,CAAC,aAAa,IAAI,MAAM,CAAC,QAAQ;IAC/D,eAAA,QAAQ,CAAC,OAAO,IAAI,QAAQ,CAAC,YAAY,EAAE;IAC9C,YAAA,OAAO,IAAI,CAAC;aACf;IACD,QAAA,OAAO,KAAK,CAAC;SAChB;QAED,OAAO,IAAI,OAAO,CAAC,CAAO,OAA8B,EAAE,MAA0B,KAAI,SAAA,CAAA,IAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;YACpF,IAAG,CAAC,GAAG,EAAE;IACL,YAAA,OAAO,MAAM,CAAC;IACV,gBAAA,IAAI,EAAE,eAAe;IACrB,gBAAA,OAAO,EAAE,gCAAgC;IAC5C,aAAA,CAAC,CAAC;aACN;IACD,QAAA,IAAI;IACA,YAAA,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC;gBAClC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;IAE7C,YAAA,IAAG,eAAe,CAAC,QAAQ,CAAC,EAAE;oBAC1B,OAAO,CAAC,QAAQ,CAAC,CAAC;iBACrB;qBACI;IACD,gBAAA,MAAM,CAAC;IACH,oBAAA,IAAI,EAAE,eAAe;IACrB,oBAAA,OAAO,EAAE,sDAAsD;IAClE,iBAAA,CAAC,CAAC;iBACN;aACJ;YACD,OAAM,GAAG,EAAE;IACP,YAAA,MAAM,CAAC;IACH,gBAAA,IAAI,EAAE,eAAe;IACrB,gBAAA,OAAO,EAAE,iCAAiC;IAC7C,aAAA,CAAC,CAAC;aACN;SAEJ,CAAA,CAAC,CAAC;IACP,CAAC;aAEe,OAAO,GAAA;QACnB,OAAO,IAAI,OAAO,CAAC,CAAO,OAAY,EAAE,MAAW,KAAI,SAAA,CAAA,IAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;YACnD,IAAG,CAAC,QAAQ,EAAE;IACV,YAAA,OAAO,MAAM,CAAC;IACV,gBAAA,IAAI,EAAE,eAAe;IACrB,gBAAA,OAAO,EAAE,2BAA2B;IACvC,aAAA,CAAC,CAAC;aACN;IACD,QAAA,IAAI;gBACA,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;IACpD,YAAA,MAAM,eAAe,GAAG,MAAM,QAAQ,CAAC,WAAW,EAAE,CAAC;IACrD,YAAA,MAAMC,eAA0B,CAAC,MAAM,CAAC,OAAO,GAAG,gBAAgB,EAAE,eAAe,CAAC,CAAC;IAErF,YAAA,OAAO,CAAC;IACJ,gBAAA,OAAO,EAAE,IAAI;IACb,gBAAA,OAAO,EAAE,sDAAsD;IAClE,aAAA,CAAC,CAAC;aACN;YACD,OAAM,GAAG,EAAE;IACP,YAAA,MAAM,CAAC;IACH,gBAAA,IAAI,EAAE,eAAe;IACrB,gBAAA,OAAO,EAAE,2BAA2B;IACvC,aAAA,CAAC,CAAC;aACN;SAEJ,CAAA,CAAC,CAAC;IACP;;;;;;;;aCnEgB,SAAS,GAAA;IACrB,IAAA,OAAO,WAAW,CAAC,qBAAqB,CAAC,CAAC;IAC9C,CAAC;aAEe,QAAQ,GAAA;IACpB,IAAA,OAAO,WAAW,CAAC,oBAAoB,CAAC,CAAC;IAC7C,CAAC;aAEe,SAAS,GAAA;QACrB,OAAO,IAAI,OAAO,CAAC,CAAC,OAAY,EAAE,MAAW,KAAI;YAC7C,WAAW,CAAC,qBAAqB,CAAC;IACjC,aAAA,IAAI,CAAC,CAAC,KAAU,KAAI;gBACjB,IAAG,KAAK,EAAE;oBACN,KAAK,CAAC,IAAI,GAAG,kBAAkB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;iBAC/C;gBACD,OAAO,CAAC,KAAK,CAAC,CAAC;IACnB,SAAC,CAAC;IACD,aAAA,KAAK,CAAC,CAAC,KAAU,KAAI;gBAClB,MAAM,CAAC,KAAK,CAAC,CAAC;IAClB,SAAC,CAAC,CAAC;IACP,KAAC,CAAC,CAAC;IACP,CAAC;IAEK,SAAU,SAAS,CAAC,IAAY,EAAA;QAClC,OAAO,WAAW,CAAC,qBAAqB,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IACxD,CAAC;IAEK,SAAU,UAAU,CAAC,KAAqB,EAAA;IAC5C,IAAA,MAAM,KAAK,GAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAY,KAAK,CAAC,CAAC;QAC9B,IAAG,KAAK,aAAL,KAAK,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAL,KAAK,CAAE,IAAI,EAAE;YACZ,KAAK,CAAC,IAAI,GAAG,mBAAmB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;SAChD;IACD,IAAA,OAAO,WAAW,CAAC,sBAAsB,EAAE,KAAK,CAAC,CAAC;IACtD,CAAC;aAEe,KAAK,GAAA;IACjB,IAAA,OAAO,WAAW,CAAC,iBAAiB,CAAC,CAAC;IAC1C;;;;;;;;;;;;aCvCgB,QAAQ,GAAA;IACpB,IAAA,OAAO,WAAW,CAAC,oBAAoB,CAAC,CAAC;IAC7C,CAAC;IAEe,SAAA,WAAW,CAAC,IAAY,EAAE,WAAmB,EAAA;QACzD,OAAO,WAAW,CAAC,uBAAuB,EAAE,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC,CAAC;IACvE,CAAC;IAEK,SAAU,QAAQ,CAAC,IAAY,EAAA;QACjC,OAAO,WAAW,CAAC,oBAAoB,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IACvD,CAAC;IAEK,SAAU,cAAc,CAAC,IAAY,EAAA;QACvC,OAAO,IAAI,OAAO,CAAC,CAAC,OAAY,EAAE,MAAW,KAAI;IAC7C,QAAA,WAAW,CAAC,0BAA0B,EAAE,EAAE,IAAI,EAAE,CAAC;IAChD,aAAA,IAAI,CAAC,CAAC,UAAkB,KAAI;IACzB,YAAA,OAAO,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC,CAAC;IAC5C,SAAC,CAAC;IACD,aAAA,KAAK,CAAC,CAAC,KAAU,KAAI;gBAClB,MAAM,CAAC,KAAK,CAAC,CAAC;IAClB,SAAC,CAAC,CAAC;IACP,KAAC,CAAC,CAAC;IACP;;;;;;;;;;aCvBgB,UAAU,GAAA;IACtB,IAAA,OAAO,WAAW,CAAC,mBAAmB,CAAC,CAAC;IAC5C;;;;;;;;;ICEA,IAAI,WAAW,GAAG,KAAK,CAAC;IAER,SAAA,IAAI,CAAC,OAAA,GAAuB,EAAE,EAAA;IAC1C,IAAA,OAAO,mBAAK,mBAAmB,EAAE,IAAI,EAAK,EAAA,OAAO,CAAE,CAAC;QAEpD,IAAG,WAAW,EAAE;YACZ,OAAO;SACV;QAEDC,MAAc,EAAE,CAAC;IAEjB,IAAA,IAAG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI,uBAAuB,CAAC,EAAE;IAC7D,QAAAR,EAAS,CAAC,kBAAkB,EAAE,MAAW,SAAA,CAAA,IAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;IACrC,YAAA,MAAMS,GAAS,CAAC,8BAA8B,CAAC,CAAC;gBAChD,QAAQ,CAAC,MAAM,EAAE,CAAC;aACrB,CAAA,CAAC,CAAC;SACN;IAED,IAAA,IAAG,OAAO,CAAC,mBAAmB,IAAI,MAAM,CAAC,WAAW,IAAI,MAAM,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;IACnF,QAAA,KAAI,MAAM,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE;gBACpC,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,IAAI,KAAI;oBACpC,IAAI,IAAI,GAAG,EAAE,CAAC;IACd,gBAAA,KAAI,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE;IACtC,oBAAA,IAAG,OAAO,IAAI,IAAI,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,IAAI,EAAE;IAChE,wBAAA,IAAI,GAAO,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,IAAI,CAAK,EAAA,IAAI,CAAC,CAAC;yBAC7B;6BACI;4BACD,IAAI,GAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAO,IAAI,CAAA,EAAA,EAAE,CAAC,KAAK,GAAG,IAAI,GAAG,IAAI,EAAA,CAAC,CAAC;yBAC1C;qBACJ;oBACD,OAAOb,WAAqB,CAAC,SAAS,GAAG,MAAM,EAAE,IAAI,CAAC,CAAC;IAC3D,aAAC,CAAC;aACL;SACJ;IAED,IAAA,MAAM,CAAC,WAAW,GAAG,OAAO,CAAC;IAC7B,IAAA,MAAM,CAAC,UAAU,GAAG,0CAA0C,CAAC;QAC/D,WAAW,GAAG,IAAI,CAAC;IACvB;;;;;;;;;;;;;;;;;;;;;;;"}